---
title: "AIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã«ã‚ˆã‚‹ git commit --no-verify ã‚’å®Œå…¨ã«é˜²ãæ–¹æ³•"
emoji: "ğŸ¶"
type: "tech"
topics:
  - "git"
  - "husky"
  - "claudecode"
published: true
published_at: "2025-06-19 23:42"
---

## çµè«–

**ã‚·ã‚§ãƒ«è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®é–¢æ•°ã§gitã‚³ãƒãƒ³ãƒ‰ã‚’ä¸Šæ›¸ãã™ã‚‹**ã“ã¨ã§ã€AIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãŒ`--no-verify`ã§huskyã®pre-commitãƒ•ãƒƒã‚¯ã‚’å›é¿ã™ã‚‹å•é¡Œã‚’è§£æ±ºã§ãã‚‹ã€‚

```bash
# ~/.zshrc, ~/.bashrc, ~/.config/fish/config.fish ãªã©
git() {
    if [[ "$1" == "commit" ]]; then
        for arg in "$@"; do
            if [[ "$arg" == "--no-verify" || "$arg" == "-n" ]]; then
                echo "âŒ ERROR: --no-verify bypasses quality checks and is forbidden"
                echo "Pre-commit hooks ensure code quality. Please fix issues instead of bypassing them."
                return 1
            fi
        done
    fi
    command git "$@"
}
```

ã“ã®æ–¹æ³•ã«ã‚ˆã‚Šã€AIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆå«ã‚€å…¨ã¦ã®å®Ÿè¡Œç’°å¢ƒã§`--no-verify`ã®ä½¿ç”¨ã‚’å®Œå…¨ã«é˜²æ­¢ã—ã€ã‚³ãƒ¼ãƒ‰å“è³ªã‚’ä¿æŒã§ãã‚‹ã€‚

## èƒŒæ™¯

commitæ™‚ã«testãƒ»lintã‚’å®Ÿè¡Œã™ã‚‹huskyã§hookã—ã¦ã„ã‚‹ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«ãŠã„ã¦ã€AIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãŒ`--no-verify`ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§ã“ã‚Œã‚‰ã®å“è³ªãƒã‚§ãƒƒã‚¯ã‚’å›é¿ã™ã‚‹å•é¡ŒãŒç™ºç”Ÿã—ã¦ã„ãŸã€‚

Claude Codeã§claude.mdã«`--no-verify`ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’çµ¶å¯¾ã«ä½¿ç”¨ã—ãªã„ã‚ˆã†ã«è¿½è¨˜ã—ã¦ã‚‚åº¦ã€…å›é¿ã•ã‚ŒãŸã€‚

ã¾ãŸã€CodeRabbitã«ã‚ˆã‚‹è‡ªå‹•PRãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚‚ã—ã¦ãŠã‚Šã€ãƒ†ã‚¹ãƒˆãŒé€šã‚‰ãªã„commitãŒpushã•ã‚Œã‚‹ã¨æŒ‡æ‘˜ãŒå¢—ãˆã¦ã€AIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã¨CodeRabbitã®ã‚„ã‚Šå–ã‚ŠãŒä¸å¿…è¦ã«è¤‡é›‘ã«ãªã‚‹ã€‚

## æ¤œè¨ã—ãŸã‚¢ãƒ—ãƒ­ãƒ¼ãƒ

### âŒ ä¸æ¡ç”¨æ¡ˆ

#### 1. git aliasã«ã‚ˆã‚‹ä¸Šæ›¸ã

```bash
git config --local alias.commit '!echo "Alias working, args: $*"; git commit "$@"'
```

**ä¸æ¡ç”¨ç†ç”±**: è¨­å®šã¯èªè­˜ã•ã‚Œã‚‹ãŒã€å®Ÿè¡Œæ™‚ã«aliasãŒå‘¼ã°ã‚ŒãšåŠ¹æœãŒãªã„ã€‚
```bash
$ git config alias.commit
!echo "Alias working, args: $*"; git commit "$@"
$ git commit -m "test"
# echoå‡ºåŠ›ã•ã‚Œãšã€ç›´æ¥git commitãŒå®Ÿè¡Œã•ã‚Œã‚‹
```

#### 2. pre-commit hookå¼·åŒ–

```bash
# .husky/pre-commitå†…ã§ãƒã‚§ãƒƒã‚¯
if [[ "$arg" == "--no-verify" ]]; then
    echo "ERROR"
    exit 1
fi
```

**ä¸æ¡ç”¨ç†ç”±**: `--no-verify`ã¯huskyã®pre-commitãƒ•ãƒƒã‚¯è‡ªä½“ã‚’ã‚¹ã‚­ãƒƒãƒ—ã™ã‚‹ãŸã‚ã€ã“ã®ãƒã‚§ãƒƒã‚¯ã‚‚å®Ÿè¡Œã•ã‚ŒãšåŠ¹æœãŒãªã„ã€‚

#### 3. ã‚«ã‚¹ã‚¿ãƒ gitãƒ©ãƒƒãƒ‘ãƒ¼ã‚¹ã‚¯ãƒªãƒ—ãƒˆ

```bash
#!/bin/bash
# /usr/local/bin/git
ORIGINAL_GIT="/usr/bin/git"
# --no-verifyã‚’ãƒã‚§ãƒƒã‚¯
exec "$ORIGINAL_GIT" "$@"
```

**ä¸æ¡ç”¨ç†ç”±**: ç’°å¢ƒä¾å­˜ãŒè¤‡é›‘ã€‚Homebrew/Xcodeç­‰ã§gitã®ãƒ‘ã‚¹ãŒç•°ãªã‚Šã€PATHé †åºå¤‰æ›´ã®ãƒªã‚¹ã‚¯ã‚‚ã‚ã‚‹ã€‚

### âœ… æ¡ç”¨æ¡ˆï¼šã‚·ã‚§ãƒ«é–¢æ•°ã«ã‚ˆã‚‹gitã‚³ãƒãƒ³ãƒ‰ä¸Šæ›¸ã

æœ€çµ‚çš„ã«æ¡ç”¨ã—ãŸã®ã¯ã€ã‚·ã‚§ãƒ«ã®é–¢æ•°ã§gitã‚³ãƒãƒ³ãƒ‰ã‚’ä¸Šæ›¸ãã™ã‚‹æ–¹æ³•ã€‚

```bash
# ~/.zshrc, ~/.bashrc, ~/.config/fish/config.fish ãªã©
git() {
    if [[ "$1" == "commit" ]]; then
        for arg in "$@"; do
            if [[ "$arg" == "--no-verify" || "$arg" == "-n" ]]; then
                echo "âŒ ERROR: --no-verify bypasses quality checks and is forbidden"
                echo "Pre-commit hooks ensure code quality. Please fix issues instead of bypassing them."
                return 1
            fi
        done
    fi
    command git "$@"
}
```

**æ¡ç”¨ç†ç”±**:
- ã‚·ãƒ³ãƒ—ãƒ«ã§ç†è§£ã—ã‚„ã™ã„å®Ÿè£…
- ç’°å¢ƒä¾å­˜ãŒå°‘ãªã„
- ç°¡å˜ã«rollbackå¯èƒ½
- AIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆå«ã‚€å…¨å®Ÿè¡Œç’°å¢ƒã§æœ‰åŠ¹

## å®Ÿè£…çµæœ

### å‹•ä½œç¢ºèª

å®Ÿè£…å¾Œã®å‹•ä½œãƒ†ã‚¹ãƒˆã‚’è¡Œã£ãŸï¼š

```bash
# âŒ ã‚¨ãƒ©ãƒ¼ã§æ‹’å¦ã•ã‚Œã‚‹
$ git commit --no-verify
âŒ ERROR: --no-verify bypasses quality checks and is forbidden
Pre-commit hooks ensure code quality. Please fix issues instead of bypassing them.

# âŒ çŸ­ç¸®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚‚æ‹’å¦ã•ã‚Œã‚‹  
$ git commit -n
âŒ ERROR: --no-verify bypasses quality checks and is forbidden
Pre-commit hooks ensure code quality. Please fix issues instead of bypassing them.

# âœ… æ­£å¸¸ãªcommitã¯é€šã‚‹
$ git commit -m "test"
# huskyã®pre-commitãŒå®Ÿè¡Œã•ã‚Œã€æˆåŠŸã™ã‚Œã°commitå®Œäº†

# âœ… ãã®ä»–ã®gitã‚³ãƒãƒ³ãƒ‰ã‚‚æ­£å¸¸å‹•ä½œ
$ git status
$ git push
```

### äº’æ›æ€§

- **zsh/bashä¸¡å¯¾å¿œ**: ä¸¡æ–¹ã®ã‚·ã‚§ãƒ«ã§å‹•ä½œç¢ºèªæ¸ˆã¿

## ã¾ã¨ã‚

ã‚·ã‚§ãƒ«é–¢æ•°ã«ã‚ˆã‚‹gitã‚³ãƒãƒ³ãƒ‰ä¸Šæ›¸ãã«ã‚ˆã‚Šã€`--no-verify`ã«ã‚ˆã‚‹å“è³ªãƒã‚§ãƒƒã‚¯å›é¿ã‚’å®Œå…¨ã«é˜²æ­¢ã§ããŸã€‚AIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãŒè³¢ããªã£ãŸåé¢ã€ä½™è¨ˆãªã“ã¨ã‚‚ã™ã‚‹ã“ã¨ã‚‚å¢—ãˆã¦ã„ã‚‹æ°—ãŒã™ã‚‹ã®ã§ã€AIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãŒè¿·èµ°ã—ãªã„ã‚ˆã†ã«ãƒ¬ãƒ¼ãƒ«ã‚’ä½œã‚‹ã“ã¨ãŒé‡è¦ã ã¨å®Ÿæ„Ÿã—ãŸã€‚