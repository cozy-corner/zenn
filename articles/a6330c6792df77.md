---
title: "keep-sortedã§ã‚³ãƒ¼ãƒ‰å†…ãƒªã‚¹ãƒˆã‚’è‡ªå‹•ã‚½ãƒ¼ãƒˆç®¡ç†ã™ã‚‹"
emoji: "ğŸ”¤"
type: "tech"
topics:
  - "git"
  - "golang"
  - "é–‹ç™ºç’°å¢ƒ"
  - "è‡ªå‹•åŒ–"
published: true
published_at: "2025-10-16 00:08"
---

## ãªãœã‚½ãƒ¼ãƒˆãŒå¿…è¦ãªã®ã‹

ã‚½ãƒ¼ãƒˆã«ã¯ä»¥ä¸‹ã®ã‚ˆã†ãªåˆ©ç‚¹ãŒã‚ã‚Šã¾ã™ï¼š

### 1. é‡è¤‡ã®ç™ºè¦‹

è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã§åŒã˜ã‚­ãƒ¼ã‚’è¤‡æ•°å›å®šç¾©ã—ã¦ã—ã¾ã„ã€æ„å›³ã—ãªã„å‹•ä½œã«ãªã£ãŸã“ã¨ã¯ã‚ã‚Šã¾ã›ã‚“ã‹ï¼Ÿ
(ç§ã¯ãªã„ã§ã™ï¼‰

```yaml
allow_warping: false
enable_two_players: false
show_end_credits: true
enable_frost_band: false
enable_two_players: true  # é‡è¤‡ã«æ°—ã¥ãã«ãã„
```

ã‚½ãƒ¼ãƒˆã™ã‚‹ã¨é‡è¤‡ãŒæ˜ç¢ºã«ãªã‚Šã¾ã™ã­ï¼š

```yaml
# keep-sorted start
allow_warping: false
enable_frost_band: false
enable_two_players: false
enable_two_players: true  # é‡è¤‡ãŒéš£æ¥ã—ã¦ç™ºè¦‹ã—ã‚„ã™ã„
show_end_credits: true
# keep-sorted end
```

å‚è€ƒ: [Sort Lines in Source Code - Google Testing Blog](https://testing.googleblog.com/2025/09/sort-lines-in-source-code.html)

### 2. å¯èª­æ€§ã¨ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹æ€§ã®å‘ä¸Š

- ã‚¢ãƒ«ãƒ•ã‚¡ãƒ™ãƒƒãƒˆé †ã«ãªã£ã¦ã„ã‚‹ã¨ã€ç‰¹å®šã®é …ç›®ã‚’æ¢ã—ã‚„ã™ã„
- è¿½åŠ ãƒ»å‰Šé™¤ã®å·®åˆ†ãŒæ˜ç¢ºã«ãªã‚‹
- ãƒãƒ¼ã‚¸ã‚³ãƒ³ãƒ•ãƒªã‚¯ãƒˆãŒç™ºç”Ÿã—ã«ãããªã‚‹

### 3. ãƒ¬ãƒ“ãƒ¥ãƒ¼ã®è² æ‹…è»½æ¸›

ã€Œã‚½ãƒ¼ãƒˆé †ã‚’æƒãˆã¦ãã ã•ã„ã€ã¨ã„ã†ã‚³ãƒ¡ãƒ³ãƒˆãŒä¸è¦ã«ãªã‚Šã¾ã™ã€‚

## keep-sortedã¨ã¯

keep-sortedã¯ã€GoogleãŒé–‹ç™ºã—ãŸ**ãƒ•ã‚¡ã‚¤ãƒ«å†…ã®ç‰¹å®šã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’è‡ªå‹•çš„ã«ã‚½ãƒ¼ãƒˆã™ã‚‹ãƒ„ãƒ¼ãƒ«**ã§ã™ã€‚

https://github.com/google/keep-sorted

è¨€èªéä¾å­˜ã§ã€ãƒãƒ¼ã‚«ãƒ¼ã§å›²ã‚“ã éƒ¨åˆ†ã‚’è‡ªå‹•çš„ã«ã‚¢ãƒ«ãƒ•ã‚¡ãƒ™ãƒƒãƒˆé †ï¼ˆã¾ãŸã¯æŒ‡å®šã—ãŸé †åºï¼‰ã«ã‚½ãƒ¼ãƒˆã—ã¦ãã‚Œã¾ã™ã€‚

### å¾“æ¥ã®ãƒ„ãƒ¼ãƒ«ã¨ã®é•ã„

ã‚½ãƒ¼ãƒˆãƒ„ãƒ¼ãƒ«ã«ã¯ä»¥ä¸‹ã®ã‚ˆã†ãªã‚‚ã®ãŒã‚ã‚Šã¾ã™ï¼š

**è¨€èªå°‚ç”¨ãƒ„ãƒ¼ãƒ«ï¼ˆimportæ–‡ã«ç‰¹åŒ–ï¼‰**
- Python: `isort`, `black`
- Go: `goimports`
- JavaScript: `eslint-plugin-import`

**æ±ç”¨ãƒ†ã‚­ã‚¹ãƒˆã‚½ãƒ¼ãƒˆãƒ„ãƒ¼ãƒ«**
- UNIXã®`sort`ã‚³ãƒãƒ³ãƒ‰
- ã‚¨ãƒ‡ã‚£ã‚¿ã®ã‚½ãƒ¼ãƒˆæ©Ÿèƒ½

è¨€èªå°‚ç”¨ãƒ„ãƒ¼ãƒ«ã¯importæ–‡ã«ç‰¹åŒ–ã—ã¦ãŠã‚Šã€ãã®ä»–ã®ãƒªã‚¹ãƒˆã«ã¯ä½¿ãˆã¾ã›ã‚“ã€‚æ±ç”¨ãƒ„ãƒ¼ãƒ«ã¯ä»»æ„ã®ãƒ†ã‚­ã‚¹ãƒˆã‚’ã‚½ãƒ¼ãƒˆã§ãã¾ã™ãŒã€è¨€èªã®æ§‹æ–‡ã‚„ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã‚’ç†è§£ã—ã¾ã›ã‚“ã€‚

keep-sortedã¯ãã®ä¸­é–“çš„ãªå­˜åœ¨ã§ï¼š
- **è¨€èªéä¾å­˜** - ã‚ã‚‰ã‚†ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«å½¢å¼ã§ä½¿ãˆã‚‹
- **æŸ”è»Ÿãªã‚½ãƒ¼ãƒˆå¯¾è±¡** - æ˜ç¤ºçš„ã«ãƒãƒ¼ã‚«ãƒ¼ã§å›²ã‚“ã éƒ¨åˆ†ã‚’ã‚½ãƒ¼ãƒˆ
- **ç´°ã‹ã„åˆ¶å¾¡** - ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§é †åºã‚’ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºï¼ˆnumericã€prefix_orderãªã©ï¼‰

## ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

Go 1.23ä»¥ä¸ŠãŒå¿…è¦ã§ã™ã€‚

```bash
go install github.com/google/keep-sorted@v0.7.1
```

## åŸºæœ¬çš„ãªä½¿ã„æ–¹

ã‚½ãƒ¼ãƒˆã—ãŸã„éƒ¨åˆ†ã‚’ `keep-sorted start` ã¨ `keep-sorted end` ã§å›²ã‚€ã ã‘ã§ã™ã€‚

```java
@Component(
    modules = {
      // keep-sorted start
      UtilsModule.class,
      GetRequestModule.class,
      PostRequestModule.class,
      AuthModule.class,
      // keep-sorted end
    })
```

keep-sortedã‚’å®Ÿè¡Œã™ã‚‹ã¨ï¼š

```bash
keep-sorted example.java
```

è‡ªå‹•çš„ã«ã‚½ãƒ¼ãƒˆã•ã‚Œã¾ã™ï¼š

```java
@Component(
    modules = {
      // keep-sorted start
      AuthModule.class,
      GetRequestModule.class,
      PostRequestModule.class,
      UtilsModule.class,
      // keep-sorted end
    })
```

## å®Ÿç”¨çš„ãªãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹

### Expressã®ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°å®šç¾©

HTTPãƒ¡ã‚½ãƒƒãƒ‰ã‚’ç„¡è¦–ã—ã¦ã€ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆåã§ã‚½ãƒ¼ãƒˆã™ã‚‹ï¼š

```javascript
// keep-sorted start ignore_prefixes=app.get,app.post,app.put,app.delete
app.post('/auth/login', loginHandler);
app.get('/users', getUsersHandler);
app.delete('/users/:id', deleteUserHandler);
app.post('/users', createUserHandler);
app.get('/posts', getPostsHandler);
app.put('/posts/:id', updatePostHandler);
app.get('/comments', getCommentsHandler);
// keep-sorted end
```

å®Ÿè¡Œå¾Œã€ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆåˆ¥ã«ã‚°ãƒ«ãƒ¼ãƒ—åŒ–ã•ã‚Œã¾ã™ï¼š

```javascript
// keep-sorted start ignore_prefixes=app.get,app.post,app.put,app.delete
app.post('/auth/login', loginHandler);
app.get('/comments', getCommentsHandler);
app.get('/posts', getPostsHandler);
app.put('/posts/:id', updatePostHandler);
app.post('/users', createUserHandler);
app.get('/users', getUsersHandler);
app.delete('/users/:id', deleteUserHandler);
// keep-sorted end
```

ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°å®šç¾©ãŒå¤šã„å ´åˆã«ã€ã“ã®æ•´ç†ãŒå½¹ç«‹ã¡ã¾ã™ã€‚

### Markdownãƒ†ãƒ¼ãƒ–ãƒ«

ãƒ˜ãƒƒãƒ€ãƒ¼è¡Œã‚’ã‚¹ã‚­ãƒƒãƒ—ã—ã¦å†…å®¹ã ã‘ã‚½ãƒ¼ãƒˆï¼š

```markdown
<!-- keep-sorted start skip_lines=2 -->
| Name | Age | City |
|------|-----|------|
| Charlie | 35 | Tokyo |
| Alice | 28 | Osaka |
| Bob | 42 | Kyoto |
<!-- keep-sorted end -->
```

å®Ÿè¡Œå¾Œï¼š

```markdown
<!-- keep-sorted start skip_lines=2 -->
| Name | Age | City |
|------|-----|------|
| Alice | 28 | Osaka |
| Bob | 42 | Kyoto |
| Charlie | 35 | Tokyo |
<!-- keep-sorted end -->
```

## ã‚ªãƒ—ã‚·ãƒ§ãƒ³

keep-sortedã«ã¯è±Šå¯Œãªã‚ªãƒ—ã‚·ãƒ§ãƒ³ãŒã‚ã‚Šã¾ã™ã€‚ä¸Šã®ä¾‹ã§ä½¿ã£ãŸï¼š

- `ignore_prefixes` - ç‰¹å®šã®ãƒ—ãƒ¬ãƒ•ã‚£ãƒƒã‚¯ã‚¹ã‚’ç„¡è¦–ã—ã¦ã‚½ãƒ¼ãƒˆ
- `prefix_order` - ã‚«ã‚¹ã‚¿ãƒ é †åºã‚’æŒ‡å®š
- `skip_lines=N` - å…ˆé ­Nè¡Œã‚’ã‚¹ã‚­ãƒƒãƒ—

ãã®ä»–ã«ã‚‚ `numeric=yes`ï¼ˆæ•°å€¤ã‚½ãƒ¼ãƒˆï¼‰ã€`case=no`ï¼ˆå¤§æ–‡å­—å°æ–‡å­—ã‚’åŒºåˆ¥ã—ãªã„ï¼‰ãªã©æ§˜ã€…ãªã‚ªãƒ—ã‚·ãƒ§ãƒ³ãŒã‚ã‚Šã¾ã™ã€‚

è©³ç´°ã¯[å…¬å¼README](https://github.com/google/keep-sorted?tab=readme-ov-file#options)ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

## pre-commitã¨ã®çµ±åˆ

`.pre-commit-config.yaml`ã«ä»¥ä¸‹ã‚’è¿½åŠ ï¼š

```yaml
repos:
  - repo: https://github.com/google/keep-sorted
    rev: v0.7.1
    hooks:
      - id: keep-sorted
```

ã‚³ãƒŸãƒƒãƒˆæ™‚ã«è‡ªå‹•çš„ã«ã‚½ãƒ¼ãƒˆã•ã‚Œã¾ã™ã€‚

```bash
$ git commit -m "Add unsorted list"
keep-sorted..............................................................Failed
- files were modified by this hook
```

ãƒ•ã‚¡ã‚¤ãƒ«ãŒè‡ªå‹•ä¿®æ­£ã•ã‚Œã‚‹ã®ã§ã€å†åº¦ã‚³ãƒŸãƒƒãƒˆã™ã‚Œã°æˆåŠŸã—ã¾ã™ï¼š

```bash
$ git add .
$ git commit -m "Add sorted list"
keep-sorted..............................................................Passed
```

## GitHub Actionsã¨ã®çµ±åˆ

pre-commitã‚’ã‚¹ã‚­ãƒƒãƒ—ã—ãŸå¤‰æ›´ã‚’æ¤œçŸ¥ã™ã‚‹ãŸã‚ã€CIã§ã‚‚ãƒã‚§ãƒƒã‚¯ã‚’è¡Œã†ã“ã¨ãŒã§ãã¾ã™ã€‚

`.github/workflows/keep-sorted.yml`ã‚’ä½œæˆï¼š

```yaml
name: keep-sorted

on:
  pull_request:
  push:
    branches:
      - main

jobs:
  check-sorted:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4

      - name: Set up Go
        uses: actions/setup-go@v5
        with:
          go-version: '1.23'

      - name: Install keep-sorted
        run: go install github.com/google/keep-sorted@v0.7.1

      - name: Check if files are sorted
        run: keep-sorted --mode=lint .
```

`--mode=lint` ã¯ãƒã‚§ãƒƒã‚¯ã®ã¿è¡Œã„ã€ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å¤‰æ›´ã—ã¾ã›ã‚“ã€‚ã‚½ãƒ¼ãƒˆã•ã‚Œã¦ã„ãªã‘ã‚Œã°CIãŒå¤±æ•—ã—ã¾ã™ã€‚

### lint modeã®å‡ºåŠ›ä¾‹

```bash
$ keep-sorted --mode=lint unsorted.txt
```

```json
[
  {
    "path": "unsorted.txt",
    "lines": { "start": 2, "end": 5 },
    "message": "These lines are out of order.",
    "fixes": [{
      "replacements": [{
        "lines": { "start": 2, "end": 5 },
        "new_content": "apple\nbanana\ncherry\nzebra\n"
      }]
    }]
  }
]
```

## ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹

### ãƒ­ãƒ¼ã‚«ãƒ«ã¨CIã®çµ„ã¿åˆã‚ã›

1. **ãƒ­ãƒ¼ã‚«ãƒ«ï¼ˆpre-commitï¼‰** - è‡ªå‹•ä¿®æ­£ã§é–‹ç™ºè€…ã®åˆ©ä¾¿æ€§ã‚’å‘ä¸Š
2. **CIï¼ˆGitHub Actionsï¼‰** - å“è³ªã‚²ãƒ¼ãƒˆã¨ã—ã¦æ©Ÿèƒ½

ã“ã®çµ„ã¿åˆã‚ã›ã§ã€ã‚½ãƒ¼ãƒˆé †ã®å•é¡Œã‚’å‰Šæ¸›ã§ãã¾ã™ã€‚

### é©åˆ‡ãªç²’åº¦ã§ä½¿ã†

ã™ã¹ã¦ã‚’ã‚½ãƒ¼ãƒˆã™ã‚‹å¿…è¦ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚ãƒãƒ¼ã‚¸ã‚³ãƒ³ãƒ•ãƒªã‚¯ãƒˆãŒèµ·ãã‚„ã™ã„éƒ¨åˆ†ã‚„ã€é †åºã‚’çµ±ä¸€ã—ãŸã„éƒ¨åˆ†ã«é™å®šã—ã¦ä½¿ã„ã¾ã—ã‚‡ã†ã€‚

## ã¾ã¨ã‚

keep-sortedã¯ï¼š

- **ãƒãƒ¼ã‚¸ã‚³ãƒ³ãƒ•ãƒªã‚¯ãƒˆã‚’å‰Šæ¸›** - è‡ªå‹•ã‚½ãƒ¼ãƒˆã§é †åºã‚’çµ±ä¸€
- **è¨€èªéä¾å­˜** - ã‚ã‚‰ã‚†ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«å½¢å¼ã§ä½¿ãˆã‚‹
- **æŸ”è»Ÿ** - è±Šå¯Œãªã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§ç´°ã‹ãåˆ¶å¾¡
- **è‡ªå‹•åŒ–** - pre-commit/GitHub Actionsã§é‹ç”¨å¯èƒ½

ç‰¹ã«ä»¥ä¸‹ã®ã‚ˆã†ãªç”¨é€”ã§æ´»ç”¨ã§ãã¾ã™ï¼š
- APIãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°å®šç¾©
- è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«
- enumã‚„å®šæ•°ãƒªã‚¹ãƒˆ
- Markdownãƒ†ãƒ¼ãƒ–ãƒ«

ãƒãƒ¼ãƒ é–‹ç™ºã§ã®ã‚³ãƒ³ãƒ•ãƒªã‚¯ãƒˆã‚’æ¸›ã‚‰ã—ã€ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’ã‚¹ãƒ ãƒ¼ã‚ºã«ã™ã‚‹ãŸã‚ã®é¸æŠè‚¢ã¨ã—ã¦æ¤œè¨ã—ã¦ã¿ã¦ãã ã•ã„ã€‚
